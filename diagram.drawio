<mxfile host="app.diagrams.net" modified="2022-01-06T12:07:17.527Z" agent="5.0 (Windows)" etag="aNcRofyU99EjKrhn6pn5" version="16.2.2" type="github">
  <diagram name="Page-1" id="74e2e168-ea6b-b213-b513-2b3c1d86103e">
    <mxGraphModel dx="868" dy="508" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" background="none" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ehqzlcscsCSHqdPRzGeW-20" value="&lt;div&gt;&lt;b&gt;create_cq_user(struct mlx5_ib_dev *dev, struct ib_udata *udata, &lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;center&quot;&gt;&lt;b&gt;struct mlx5_ib_cq *cq, int entries, u32 **cqb, int *cqe_size, int &lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;b&gt;*index, int *inlen)&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="440" y="190" width="320" height="530" as="geometry" />
        </mxCell>
        <mxCell id="ehqzlcscsCSHqdPRzGeW-19" value="&lt;div&gt;&lt;b&gt;mlx5_ib_create_cq(struct ib_cq *ibcq, const struct ib_cq_init_attr *attr, struct ib_udata *udata)&lt;/b&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="360" height="800" as="geometry" />
        </mxCell>
        <mxCell id="ehqzlcscsCSHqdPRzGeW-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ehqzlcscsCSHqdPRzGeW-12" target="ehqzlcscsCSHqdPRzGeW-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ehqzlcscsCSHqdPRzGeW-12" value="&lt;div&gt;Initialize &lt;b&gt;&lt;i&gt;mlx5_ib_cq&lt;/i&gt;&lt;/b&gt; structure.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font data-font-src=&quot;https://fonts.googleapis.com/css?family=Consolas&quot; face=&quot;Consolas&quot;&gt;cq-&amp;gt;ibcq.cqe = entries - 1;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font data-font-src=&quot;https://fonts.googleapis.com/css?family=Consolas&quot; face=&quot;Consolas&quot;&gt;mutex_init(&amp;amp;cq-&amp;gt;resize_mutex);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font data-font-src=&quot;https://fonts.googleapis.com/css?family=Consolas&quot; face=&quot;Consolas&quot;&gt;spin_lock_init(&amp;amp;cq-&amp;gt;lock);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font data-font-src=&quot;https://fonts.googleapis.com/css?family=Consolas&quot; face=&quot;Consolas&quot;&gt;cq-&amp;gt;resize_buf = NULL;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font data-font-src=&quot;https://fonts.googleapis.com/css?family=Consolas&quot; face=&quot;Consolas&quot;&gt;cq-&amp;gt;resize_umem = NULL:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font data-font-src=&quot;https://fonts.googleapis.com/css?family=Consolas&quot; face=&quot;Consolas&quot;&gt;cq-&amp;gt;create_flags = attr-&amp;gt;flags;&lt;br&gt;INIT_LIST_HEAD(&amp;amp;cq-&amp;gt;list_send_qp);&lt;br&gt;INIT_LIST_HEAD(&amp;amp;cq-&amp;gt;list_recv_qp);&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="100" width="340" height="160" as="geometry" />
        </mxCell>
        <mxCell id="ehqzlcscsCSHqdPRzGeW-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" edge="1" parent="1" source="ehqzlcscsCSHqdPRzGeW-21" target="ehqzlcscsCSHqdPRzGeW-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ehqzlcscsCSHqdPRzGeW-21" value="&lt;font data-font-src=&quot;https://fonts.googleapis.com/css?family=Consolas&quot; face=&quot;Consolas&quot;&gt;create_cq_user(dev, udata, cq, entries, &amp;amp;cqb, &amp;amp;cqe_size, &amp;amp;index, &amp;amp;inlen);&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="280" width="340" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ehqzlcscsCSHqdPRzGeW-29" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Consolas;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DConsolas;" edge="1" parent="1" source="ehqzlcscsCSHqdPRzGeW-24" target="ehqzlcscsCSHqdPRzGeW-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ehqzlcscsCSHqdPRzGeW-24" value="&lt;div&gt;Pin and DMA map user-space memory&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font data-font-src=&quot;https://fonts.googleapis.com/css?family=Consolas&quot; face=&quot;Consolas&quot;&gt;ucmdlen = min(udata-&amp;gt;inlen, sizeof(ucmd));&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font data-font-src=&quot;https://fonts.googleapis.com/css?family=Consolas&quot; face=&quot;Consolas&quot;&gt;ib_copy_from_udata(&amp;amp;ucmd, udata, ucmdlen)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font data-font-src=&quot;https://fonts.googleapis.com/css?family=Consolas&quot; face=&quot;Consolas&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font data-font-src=&quot;https://fonts.googleapis.com/css?family=Consolas&quot; face=&quot;Consolas&quot;&gt;cq-&amp;gt;buf.umem = ib_umem_get(&amp;amp;dev-&amp;gt;ib_dev, ucmd.buf_addr, entries * ucmd.cqe_size, IB_ACCESS_LOCAL_WRITE);&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="280" width="300" height="130" as="geometry" />
        </mxCell>
        <mxCell id="ehqzlcscsCSHqdPRzGeW-28" value="&lt;div&gt;Map Doorbell to user-space&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;mlx5_ib_db_map_user(context, udata, ucmd.db_addr, &amp;amp;cq-&amp;gt;db);&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="430" width="300" height="70" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
